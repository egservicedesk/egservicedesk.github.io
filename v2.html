<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>EG America Ticket Template</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      display: flex;
      align-items: flex-start;
      animation: fadeInBackground 2s ease-in-out;
      transition: background 1s ease-in-out;
    }
    @keyframes fadeInBackground {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    .bg-fade {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      z-index: -1;
      transition: opacity 2s ease-in-out;
      opacity: 1;
      background-repeat: no-repeat;
      background-position: center center;
      background-size: cover;
    }
    .sidebar {
      width: 200px;
      margin-right: 20px;
    }
    .sidebar button {
      display: block;
      width: 100%;
      margin-bottom: 10px;
      padding: 10px;
      background-color: #ffffffcc;
      border: 1px solid #ccc;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
    }
    .form-container {
      flex-grow: 1;
      max-width: 800px;
    }
    .form-section { display: none; }
    .form-section.active { display: block; }
    .form-box {
      background-color: rgba(255, 255, 255, 0.85);
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
    }
    h2, h3 { margin-top: 0; }
    label { font-weight: bold; display: block; margin-bottom: 5px; }
    input, select, textarea {
      width: 100%;
      padding: 10px;
      margin-bottom: 15px;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
      font-size: 14px;
    }
    input::placeholder, textarea::placeholder { color: #aaa; }
    .generate-btn, .copy-btn, .clear-btn {
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-bottom: 20px;
      font-size: 14px;
    }
    .generate-btn { background-color: #007BFF; color: #fff; }
    .copy-btn { background-color: #28a745; color: #fff; }
    .clear-btn { background-color: #dc3545; color: #fff; }
    #copyMessage {
      position: fixed;
      bottom: 20px;
      left: 20px;
      background-color: #d4edda;
      color: #155724;
      padding: 10px;
      border: 1px solid #c3e6cb;
      border-radius: 5px;
      display: none;
      z-index: 99999;
    }
    .fade-link {
      display: block;
      margin: 12px 0;
      color: #007BFF;
      cursor: pointer;
      font-weight: bold;
      text-decoration: underline;
      font-size: 16px;
    }
    .fade-message {
      display: none;
      opacity: 0;
      transition: opacity 1s ease;
      background: #fff;
      border: 1px solid #007BFF;
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 15px;
      margin-left: 10px;
      font-size: 14px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.07);
      max-width: 600px;
    }
    .fade-message.show {
      display: block;
      opacity: 1;
    }
    .input-error {
      border: 2px solid #dc3545 !important;
      background-color: #fff0f0;
      animation: none;
    }
    .error-message {
      color: #dc3545;
      font-size: 13px;
      margin: -10px 0 10px 0;
      display: none;
      opacity: 0;
      transition: opacity 0.5s;
    }
    .error-message.fadein {
      display: block;
      opacity: 1;
      animation: fadeError 5s linear forwards;
    }
    @keyframes blinkError {
      0%, 100% { background-color: #fff0f0; border-color: #dc3545; }
      20% { background-color: #fff; border-color: #dc3545; }
      40% { background-color: #fff0f0; border-color: #dc3545; }
      60% { background-color: #fff; border-color: #dc3545; }
      80% { background-color: #fff0f0; border-color: #dc3545; }
    }
    @keyframes fadeError {
      0% { opacity: 1; }
      100% { opacity: 0; }
    }
    .calendar-icon {
      display: inline-block;
      vertical-align: middle;
      margin-right: 5px;
      width: 22px;
      height: 22px;
      background: url('data:image/svg+xml;utf8,<svg fill="black" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-2 .89-2 2v14a2 2 0 002 2h14a2 2 0 002-2V6c0-1.11-.89-2-2-2zm0 16H5V9h14v11zm0-13H5V6h14v1zm-10 5h2v2H9v-2zm0 4h2v2H9v-2zm4-4h2v2h-2v-2zm0 4h2v2h-2v-2z"/></svg>') no-repeat center center;
      background-size: contain;
    }
  </style>
  <script>
    // Wallpaper images array (wallpaper1.jpg to wallpaper15.jpg)
    const images = [
      'wallpaper1.jpg',
      'wallpaper2.jpg',
      'wallpaper3.jpg',
      'wallpaper4.jpg',
      'wallpaper5.jpg',
      'wallpaper6.jpg',
      'wallpaper7.jpg',
      'wallpaper8.jpg',
      'wallpaper9.jpg',
      'wallpaper10.jpg',
      'wallpaper11.jpg',
      'wallpaper12.jpg',
      'wallpaper13.jpg',
      'wallpaper14.jpg',
      'wallpaper15.jpg'
    ];
    let currentIndex = Math.floor(Math.random() * images.length);

    // Equipment option lists
    const cfEquipmentOptions = [
      "Bos hardware",
      "Bos software",
      "Brinks/Tidel safe",
      "Car wash",
      "Communication",
      "Digital gas price sign",
      "Digital menu board",
      "Digital sale sign",
      "Electronic tenders",
      "Gas dispenser problems",
      "Hto terminals",
      "Label maker",
      "Loyalty",
      "Money order machine",
      "Non-IT information request",
      "Other systems",
      "Password resets",
      "Pdi",
      "Pdi handheld",
      "Pdi paperwork",
      "Phonelines",
      "Pos hardware",
      "Pos hardware - self checkout",
      "Pos software",
      "Power problems",
      "Skip co",
      "Store music system-AIM",
      "Tablets",
      "Teammate assistance",
      "Titan"
    ];
    const egEquipmentOptions = [
      "EG â€“ Back office",
      "EG â€“ Carwash",
      "EG â€“ Credit/debit",
      "EG â€“ Digital menu board",
      "EG â€“ Digital sale sign",
      "EG â€“ Gas dispenser problems",
      "EG â€“ Gift cards",
      "EG â€“ Loyalty",
      "EG â€“ Network",
      "EG â€“ Non-IT information request",
      "EG â€“ Password resets",
      "EG â€“ Pdi handheld",
      "EG â€“ Pdi paperwork",
      "EG â€“ Phone line",
      "EG â€“ Pos",
      "EG â€“ Power problems",
      "EG â€“ Pricebook",
      "EG â€“ Pricebook (franchisee only)",
      "EG â€“ Printers",
      "EG â€“ Western union"
    ];

    function setEquipmentOptions(options) {
      const equipmentSelect = document.getElementById("zoomEquipment");
      equipmentSelect.innerHTML = '';
      const defaultOption = document.createElement("option");
      defaultOption.value = "";
      defaultOption.textContent = "--Select Equipment--";
      equipmentSelect.appendChild(defaultOption);
      options.forEach(opt => {
        const option = document.createElement("option");
        option.value = opt;
        option.textContent = opt;
        equipmentSelect.appendChild(option);
      });
    }

    document.addEventListener("DOMContentLoaded", function () {
      const fadeBg1 = document.createElement('div');
      const fadeBg2 = document.createElement('div');
      fadeBg1.className = 'bg-fade';
      fadeBg2.className = 'bg-fade';
      document.body.prepend(fadeBg2);
      document.body.prepend(fadeBg1);

      let active = 0;
      fadeBg1.style.backgroundImage = `url('${images[currentIndex]}')`;
      fadeBg1.style.opacity = "1";
      fadeBg2.style.opacity = "0";
      fadeBg2.style.backgroundImage = "";

      setInterval(() => {
        const nextIndex = (currentIndex + 1) % images.length;
        if (active === 0) {
          fadeBg2.style.backgroundImage = `url('${images[nextIndex]}')`;
          fadeBg2.style.opacity = "1";
          fadeBg1.style.opacity = "0";
        } else {
          fadeBg1.style.backgroundImage = `url('${images[nextIndex]}')`;
          fadeBg1.style.opacity = "1";
          fadeBg2.style.opacity = "0";
        }
        currentIndex = nextIndex;
        active = 1 - active;
      }, 60000);

      document.getElementById('zoomTicket').addEventListener('input', function(e) {
        validateNumberInput(e, 'zoomTicket', 'zoomTicketError');
      });
      document.getElementById('zoomStore').addEventListener('input', function(e) {
        validateNumberInput(e, 'zoomStore', 'zoomStoreError');
      });

      const bannerSelect = document.getElementById("zoomBanner");
      bannerSelect.addEventListener("change", function() {
        if (bannerSelect.value === "Cumberland Farms (CF)") {
          setEquipmentOptions(cfEquipmentOptions);
        } else if (bannerSelect.value !== "") {
          setEquipmentOptions(egEquipmentOptions);
        } else {
          setEquipmentOptions([]);
        }
      });
      setEquipmentOptions([]);

      // Placeholder toggles for Service Channel
      [
        { id: "updName", placeholder: "Name of caller/contact" },
        { id: "updRole", placeholder: "Manager/Cashier/Staff/Etc." },
        { id: "tsSteps", placeholder: "Include phone discussion and full TS Steps" },
        { id: "updPeak", placeholder: "When do you get the most customers? In between what time in daily basis?" }
      ].forEach(field => {
        var el = document.getElementById(field.id);
        if (!el) return;
        el.placeholder = field.placeholder;
        el.addEventListener('input', function () {
          this.placeholder = this.value.length === 0 ? field.placeholder : '';
          this.style.color = this.value.length === 0 ? '#aaa' : '#222';
        });
        el.addEventListener('focus', function () {
          this.placeholder = '';
        });
        el.addEventListener('blur', function () {
          this.placeholder = this.value.length === 0 ? field.placeholder : '';
          this.style.color = this.value.length === 0 ? '#aaa' : '#222';
        });
        // Initial state
        el.style.color = el.value.length === 0 ? '#aaa' : '#222';
      });

      var actionOwnerEl = document.getElementById('actionOwner');
      if (actionOwnerEl) togglePlaceholder(actionOwnerEl, actionOwnerEl.placeholder);
      var callOutcomeEl = document.getElementById('callOutcome');
      if (callOutcomeEl) togglePlaceholder(callOutcomeEl, callOutcomeEl.getAttribute('data-ph'));
      if (actionOwnerEl) {
        actionOwnerEl.addEventListener('input', function(){togglePlaceholder(this,this.placeholder)});
        actionOwnerEl.addEventListener('focus', function(){togglePlaceholder(this,this.placeholder)});
        actionOwnerEl.addEventListener('blur', function(){togglePlaceholder(this,this.placeholder)});
      }
      if (callOutcomeEl) {
        callOutcomeEl.addEventListener('input', function(){togglePlaceholder(this,this.getAttribute('data-ph'))});
        callOutcomeEl.addEventListener('focus', function(){togglePlaceholder(this,this.getAttribute('data-ph'))});
        callOutcomeEl.addEventListener('blur', function(){togglePlaceholder(this,this.getAttribute('data-ph'))});
      }
    });

    // Only show placeholder in tsSteps when changing Troubleshooting Category
    function fillTroubleshootingSteps() {
      const tsSteps = document.getElementById('tsSteps');
      tsSteps.value = "";
      tsSteps.placeholder = "Include phone discussion and full TS Steps";
      tsSteps.style.color = "#aaa";
    }

    function showForm(sectionId) {
      document.querySelectorAll('.form-section').forEach(sec => sec.classList.remove('active'));
      document.getElementById(sectionId).classList.add('active');
    }

    function getESTTimeFromDate(dateStr) {
      if (!dateStr) return "";
      const now = new Date();
      const dt = new Date(dateStr + 'T' + now.toTimeString().slice(0,5));
      const estOptions = { timeZone: 'America/New_York', year: 'numeric', month: '2-digit', day: '2-digit', hour: '2-digit', minute: '2-digit', hour12: true };
      return new Intl.DateTimeFormat('en-US', estOptions).format(dt) + " EST";
    }

    function showEstPopup() {
      const date = document.getElementById('afuDate').value;
      if (!date) return;
      const estTime = getESTTimeFromDate(date);
      if (!estTime) return;
      const popup = document.createElement('div');
      popup.textContent = "Call Date & Time: " + estTime;
      popup.style.position = "fixed";
      popup.style.top = "50px";
      popup.style.right = "50px";
      popup.style.background = "#fff";
      popup.style.border = "2px solid #007BFF";
      popup.style.color = "#222";
      popup.style.padding = "15px 30px";
      popup.style.borderRadius = "8px";
      popup.style.boxShadow = "0 6px 18px rgba(0,0,0,0.15)";
      popup.style.fontSize = "18px";
      popup.style.zIndex = "9999";
      document.body.appendChild(popup);
      setTimeout(() => {
        popup.style.transition = "opacity 1s";
        popup.style.opacity = "0";
        setTimeout(() => document.body.removeChild(popup), 1000);
      }, 3500);
      document.getElementById('afuEstTime').textContent = estTime;
    }

    function showCopyMessage(ts) {
      const copyMsg = document.getElementById('copyMessage');
      copyMsg.innerText = ts;
      copyMsg.style.display = 'block';
      setTimeout(() => {
        copyMsg.style.display = 'none';
      }, 2000);
    }

    function getCurrentTimestampEST() {
      const options = { timeZone: 'America/New_York', year: 'numeric', month: '2-digit', day: '2-digit', hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: true };
      return new Intl.DateTimeFormat('en-US', options).format(new Date()) + " EST";
    }

    function trimTrailingNewlines(str) {
      return str.replace(/[\r\n]+$/, "");
    }

    // Do not include placeholder as value when copying Service Channel form
    function copyServiceChannelForm() {
      const form = document.getElementById('updateForm');
      const fields = form.querySelectorAll('input, textarea, select');
      let result = '';
      fields.forEach(field => {
        let value = field.value;
        // Only use value, not placeholder
        let labelText = "";
        if (field.tagName.toLowerCase() === 'select') {
          const label = form.querySelector('label[for="' + field.id + '"]');
          labelText = label ? label.textContent : field.id;
        } else {
          labelText = field.previousElementSibling?.textContent || "";
        }
        result += labelText + " " + value + "\n";
      });
      result = trimTrailingNewlines(result);
      const ts = getCurrentTimestampEST();
      result += "\n" + ts;
      navigator.clipboard.writeText(result).then(() => showCopyMessage(ts));
    }

    function clearServiceChannelForm() {
      const form = document.getElementById('updateForm');
      const fields = form.querySelectorAll('input, textarea, select');
      fields.forEach(field => {
        if (field.tagName.toLowerCase() === 'select') {
          field.selectedIndex = 0;
        } else if (field.tagName.toLowerCase() === 'textarea') {
          field.value = "";
        } else if (field.tagName.toLowerCase() === 'input') {
          field.value = "";
        }
      });
    }

    function copyStrikeForm() {
      const ticketText = document.getElementById('ticketUpdateContent').value;
      const ts = getCurrentTimestampEST();
      let result = trimTrailingNewlines(ticketText);
      result += "\n" + ts;
      navigator.clipboard.writeText(result).then(() => showCopyMessage(ts));
    }

    function copyEmailContent() {
      const emailText = document.getElementById('emailTemplateContent').value;
      const ts = getCurrentTimestampEST();
      let result = trimTrailingNewlines(emailText);
      result += "\n" + ts;
      navigator.clipboard.writeText(result).then(() => showCopyMessage(ts));
    }

    function copyZoomForm() {
      const zoomSection = document.getElementById('zoom');
      const ticketInput = document.getElementById('zoomTicket');
      const storeInput = document.getElementById('zoomStore');
      let valid = true;
      if (ticketInput.value && !/^\d+$/.test(ticketInput.value)) {
        ticketInput.classList.add('input-error');
        validateNumberInput({target:ticketInput}, 'zoomTicket', 'zoomTicketError');
        valid = false;
      }
      if (storeInput.value && !/^\d+$/.test(storeInput.value)) {
        storeInput.classList.add('input-error');
        validateNumberInput({target:storeInput}, 'zoomStore', 'zoomStoreError');
        valid = false;
      }
      if (!valid) {
        alert("Ticket # and Store # can only contain numbers.");
        return;
      }
      const fields = zoomSection.querySelectorAll('input, textarea, select');
      let formText = "";
      fields.forEach(field => {
        if (field.tagName.toLowerCase() === 'select') {
          const label = zoomSection.querySelector('label[for="' + field.id + '"]');
          const labelText = label ? label.textContent : field.id;
          formText += labelText + " " + field.value + "\n";
        } else {
          const labelText = field.placeholder || "";
          formText += labelText + " " + field.value + "\n";
        }
      });
      formText = trimTrailingNewlines(formText);
      const ts = getCurrentTimestampEST();
      formText += "\n" + ts;
      navigator.clipboard.writeText(formText).then(() => showCopyMessage(ts));
    }

    function clearZoomForm() {
      const zoomSection = document.getElementById('zoom');
      const fields = zoomSection.querySelectorAll('input, textarea, select');
      fields.forEach(field => {
        if (field.tagName.toLowerCase() === 'select') {
          field.selectedIndex = 0;
        } else if (field.tagName.toLowerCase() === 'textarea') {
          field.value = "";
        } else if (field.tagName.toLowerCase() === 'input') {
          field.value = "";
        }
      });
    }

    function fadeToggle(id) {
      var el = document.getElementById(id);
      if (!el) return;
      if (el.classList.contains('show')) {
        el.classList.remove('show');
        setTimeout(function(){ el.style.display = 'none'; }, 1000);
      } else {
        el.style.display = 'block';
        setTimeout(function(){ el.classList.add('show'); }, 10);
      }
    }
    function togglePlaceholder(el, placeholderText) {
      if (el.value.length === 0) {
        el.placeholder = placeholderText;
        el.style.color = '#aaa';
      } else {
        el.placeholder = '';
        el.style.color = '#222';
      }
    }

    function afuReachChange() {
      const v = document.getElementById('afuReach').value;
      document.getElementById('afuCallbackWrap').style.display = v === 'No' ? 'block' : 'none';
      document.getElementById('afuContactWrap').style.display = v === 'No' ? 'block' : 'none';
    }
    function afuCallbackAttemptChange() {
      const v = document.getElementById('afuCallbackAttempt').value;
      let txt = '';
      if (v === '1st' || v === '2nd') {
        txt = "Callback store. No response. Phone kept ringing/Call dropped. Left a message in Kaseya. Sent an email to the store.";
      } else if (v === '3rd') {
        txt = "Callback store. No response. phone kept ringing/call dropped.\nLeft a message in Kaseya. Sent an email to DM and store 3rd and Final attempt.";
      }
      document.getElementById('afuActionTaken').value = txt;
    }
    function afuContactChange() {
      document.getElementById('afuOtherContact').style.display = document.getElementById('afuContact').value === 'Others' ? 'block' : 'none';
    }
    function afuCopyForm() {
      const name = document.getElementById('afuName').value;
      const role = document.getElementById('afuRole').value;
      const date = document.getElementById('afuDate').value;
      const est = document.getElementById('afuEstTime').textContent;
      const reach = document.getElementById('afuReach').value;
      let formText = `Name: ${name}\nRole: ${role}\nCall Date & Time: ${est}\nWere you able to reach the store? ${reach}\n`;
      if (reach === 'No') {
        const callback = document.getElementById('afuCallbackAttempt').value;
        const contact = document.getElementById('afuContact').value;
        formText += `Callback Attempt: ${callback}\nContact Interaction: ${contact}\n`;
        if (contact === 'Others') {
          formText += `Contact Explanation: ${document.getElementById('afuOtherContact').value}\n`;
        }
      }
      const owner = document.getElementById('afuActionOwner').value;
      const taken = document.getElementById('afuActionTaken').value;
      const next = document.getElementById('afuNextAction').value;
      formText += `Action Owner: ${owner}\nAction Taken: ${taken}\nNext Action Required: ${next}`;
      formText = trimTrailingNewlines(formText);
      const ts = getCurrentTimestampEST();
      formText += "\n" + ts;
      navigator.clipboard.writeText(formText).then(() => {
        const msg = document.getElementById('afuCopyMsg');
        msg.style.display = 'block';
        msg.textContent = 'Copied to clipboard!';
        setTimeout(() => { msg.style.display = 'none'; }, 2000);
      });
    }
    function afuClearForm() {
      document.getElementById('afuName').value = "";
      document.getElementById('afuRole').value = "";
      document.getElementById('afuDate').value = "";
      document.getElementById('afuEstTime').textContent = '';
      document.getElementById('afuReach').selectedIndex = 0;
      document.getElementById('afuCallbackWrap').style.display = 'none';
      document.getElementById('afuCallbackAttempt').selectedIndex = 0;
      document.getElementById('afuContactWrap').style.display = 'none';
      document.getElementById('afuContact').selectedIndex = 0;
      document.getElementById('afuOtherContact').value = "";
      document.getElementById('afuOtherContact').style.display = 'none';
      document.getElementById('afuActionOwner').value = "";
      document.getElementById('afuActionTaken').value = "";
      document.getElementById('afuNextAction').value = "";
      document.getElementById('afuCopyMsg').style.display = 'none';
    }
    function validateNumberInput(event, fieldId, errorId) {
      const val = event.target.value;
      const field = event.target;
      const errorEl = document.getElementById(errorId);

      if (val && !/^\d*$/.test(val)) {
        field.classList.add('input-error');
        errorEl.classList.remove('fadein');
        errorEl.style.display = 'block';
        errorEl.style.opacity = '1';
        field.style.animation = 'blinkError 1s linear 0s 5 alternate';
        errorEl.classList.add('fadein');
        setTimeout(() => {
          field.style.animation = '';
          errorEl.classList.remove('fadein');
          errorEl.style.display = 'none';
          errorEl.style.opacity = '0';
        }, 5000);
      } else {
        field.classList.remove('input-error');
        field.style.animation = '';
        errorEl.classList.remove('fadein');
        errorEl.style.display = 'none';
        errorEl.style.opacity = '0';
      }
    }
  </script>
</head>
<body>
  <div class="sidebar">
    <button onclick="showForm('update')">Service Channel</button>
    <button onclick="showForm('strike')">3-Strike Rule Template</button>
    <button onclick="showForm('zoom')">Zoom/Teams Channel</button>
    <button onclick="showForm('actionsFollowUp')">Actions/Follow-Up</button>
  </div>

  <div class="form-container">
    <!-- Service Channel Section -->
    <div id="update" class="form-section active">
      <div class="form-box">
        <h2>Service Channel</h2>
        <form id="updateForm" autocomplete="off">
          <label for="updName">Name:</label>
          <input type="text" id="updName" name="updName" placeholder="Name of caller/contact" />

          <label for="updRole">Role:</label>
          <input type="text" id="updRole" name="updRole" placeholder="Manager/Cashier/Staff/Etc." />

          <label for="updPeak">Store peak hours:</label>
          <input type="text" id="updPeak" name="updPeak" placeholder="When do you get the most customers? In between what time in daily basis?" />

          <label for="updWorking">Available working hours:</label>
          <input type="text" id="updWorking" name="updWorking" />

          <label for="updRelated">Any related/existing ticket:</label>
          <input type="text" id="updRelated" name="updRelated" />

          <label for="updError">What specific error occurred:</label>
          <input type="text" id="updError" name="updError" />

          <label for="updDevice">On which device:</label>
          <input type="text" id="updDevice" name="updDevice" />

          <label for="updSystem">Which system/equipment is affected:</label>
          <input type="text" id="updSystem" name="updSystem" />

          <label for="updAffected">How many device/s affected:</label>
          <input type="text" id="updAffected" name="updAffected" />

          <label for="updStarted">When did the issue start:</label>
          <input type="text" id="updStarted" name="updStarted" />

          <label for="tsCategory">Troubleshooting Category:</label>
          <select id="tsCategory" name="tsCategory" onchange="fillTroubleshootingSteps()">
            <option value="">--Select--</option>
            <option value="POS">POS</option>
            <option value="BOS">BOS</option>
            <option value="EOD">EOD</option>
            <option value="Paperwork">Paperwork</option>
            <option value="PDI/Handheld Scanner">PDI/Handheld Scanner</option>
            <option value="EPC/Pinpad">EPC/Pinpad</option>
            <option value="Smartpay">Smartpay</option>
            <option value="Promotions">Promotions</option>
            <option value="Pumps">Pumps</option>
            <option value="Fuel Systems">Fuel Systems</option>
            <option value="Network">Network</option>
            <option value="Receipt Printer">Receipt Printer</option>
          </select>

          <label for="tsSteps">What actions/troubleshooting steps have been taken:</label>
          <textarea id="tsSteps" name="tsSteps" rows="10" placeholder="Include phone discussion and full TS Steps"></textarea>

          <label for="nextAction">Next Action Required:</label>
          <textarea id="nextAction" name="nextAction" rows="4" required placeholder="What is the next action needed / Assign to Store Escalation / L2 Assistance /  Follow-up Vendor / Callback for confirmation"></textarea>

          <label for="updKB">KB Article/URL:</label>
          <input type="text" id="updKB" name="updKB" />

          <button type="button" class="copy-btn" onclick="copyServiceChannelForm()">Copy Form</button>
          <button type="button" class="clear-btn" onclick="clearServiceChannelForm()">Clear Form</button>
        </form>
      </div>
    </div>

    <!-- 3-Strike Rule Template Section -->
    <div id="strike" class="form-section">
      <div class="form-box">
        <h2>3-Strike Rule Template</h2>
        <h3>ServiceChannel Template</h3>
        <textarea id="ticketUpdateContent" rows="10">Callback store. No response. phone kept ringing/call dropped.
Left a message in Kaseya. Sent an email to the store.
No. of callback: 1st / 2nd / 3rd and Final

Next Action Required:
Callback store to gather additional details
Callback store to confirm if issue has been resolved
Close ticket after no response from store or DM after 3rd and Final attempt.</textarea>
      </div>
      <button class="copy-btn" onclick="copyStrikeForm()">Copy Form</button>
      <div class="form-box">
        <h3>Email Template</h3>
        <textarea id="emailTemplateContent" rows="18">Subject: (1st, 2nd, 3rd) Follow-Up on Ticket #[TICKET NUMBER] â€“ Store Action Required

Hi Store *****,

This is a follow-up regarding your open ticket #[TICKET NUMBER] concerning [brief issue description, e.g., "paperwork submission error" or "equipment issue"]. We are awaiting your response/action to proceed with the resolution. Please let us know if the issue has been resolved or if further assistance is needed.

Please note:
This is our [First/Second/Third and Final] attempt to reach you to confirm your problem has been resolved.
We have reached out to you on (Date). Since this is the final attempt, we have included the DM for final validation.
If we do not receive a response within 24 hrs., we may proceed to close the ticket, and you will need to create a new ticket if the problem persists.

Ticket Details:
â€¢ Issue: 
â€¢ Created On: 

You may respond to this email, call the Help Desk hotline, or contact us through the Service Channel as needed.

Thank you for your attention to this matter.</textarea>
      </div>
      <button class="copy-btn" onclick="copyEmailContent()">Copy Email</button>
    </div>

    <!-- Zoom/Teams Channel Section with Banner dropdown -->
    <div id="zoom" class="form-section">
      <div class="form-box">
        <h2>Zoom/Teams Channel</h2>
        <h3>Ticket Information</h3>
        <input type="text" placeholder="Ticket Description:" />
        <input type="text" placeholder="Ticket #:" id="zoomTicket" />
        <div id="zoomTicketError" class="error-message">This entry can only contain numbers.</div>
        <label for="zoomBanner">Banner:</label>
        <select id="zoomBanner">
          <option value="">--Select Banner--</option>
          <option value="Certified Oil (CO)">Certified Oil (CO)</option>
          <option value="Certified Oil - Pilot Store (CO)">Certified Oil - Pilot Store (CO)</option>
          <option value="Cumberland Farms (CF)">Cumberland Farms (CF)</option>
          <option value="Cumberland Farms - Neon (CF-Neon)">Cumberland Farms - Neon (CF-Neon)</option>
          <option value="Fastrac (FT)">Fastrac (FT)</option>
          <option value="KwikShop (KS)">KwikShop (KS)</option>
          <option value="Loaf n' Jug (LJ)">Loaf n' Jug (LJ)</option>
          <option value="Minit Mart (MM)">Minit Mart (MM)</option>
          <option value="QuikStop (QS)">QuikStop (QS)</option>
          <option value="QSR Burger King (BK)">QSR Burger King (BK)</option>
          <option value="QSR Cinnabon (CB)">QSR Cinnabon (CB)</option>
          <option value="QSR Hunt Brothers Pizza (HB)">QSR Hunt Brothers Pizza (HB)</option>
          <option value="QSR Riaâ€™s Pizzeria (RP)">QSR Riaâ€™s Pizzeria (RP)</option>
          <option value="QSR Sbarro (SB)">QSR Sbarro (SB)</option>
          <option value="QSR Subway (SW)">QSR Subway (SW)</option>
          <option value="QSR Taco Johnâ€™s (TJ)">QSR Taco Johnâ€™s (TJ)</option>
          <option value="Sprint (S)">Sprint (S)</option>
          <option value="Tom Thumb (TT)">Tom Thumb (TT)</option>
          <option value="Turkey Hill (TH)">Turkey Hill (TH)</option>
          <option value="Turkey Hill Midwest (TM)">Turkey Hill Midwest (TM)</option>
        </select>
        <input type="text" placeholder="Store #:" id="zoomStore" />
        <div id="zoomStoreError" class="error-message">This entry can only contain numbers.</div>
        <label for="zoomSla">SLA Priority Level:</label>
        <select id="zoomSla">
          <option value="">--Select Priority--</option>
          <option value="Down Store (P1)">Down Store (P1)</option>
          <option value="Emergency/Hypercare (P2)">Emergency/Hypercare (P2)</option>
          <option value="Urgent (P3)">Urgent (P3)</option>
          <option value="Normal (P4)">Normal (P4)</option>
        </select>
        <label for="zoomStatus">Status:</label>
        <select id="zoomStatus">
          <option value="">--Select Status--</option>
          <option value="Open">Open</option>
          <option value="Open/Declined">Open/Declined</option>
          <option value="In progress">In progress</option>
          <option value="In progress/Damaged order">In progress/Damaged order</option>
          <option value="In progress/Dispatch confirmed">In progress/Dispatch confirmed</option>
          <option value="In progress/In route">In progress/In route</option>
          <option value="In progress/Incomplete">In progress/Incomplete</option>
          <option value="In progress/On site">In progress/On site</option>
          <option value="In progress/Order not received">In progress/Order not received</option>
          <option value="In progress/Order shipped">In progress/Order shipped</option>
          <option value="In progress/Partial order">In progress/Partial order</option>
          <option value="In progress/Parts on order">In progress/Parts on order</option>
          <option value="In progress/Parts on site">In progress/Parts on site</option>
          <option value="In progress/Parts order confirmed">In progress/Parts order confirmed</option>
          <option value="In progress/Possible duplicate CIWO">In progress/Possible duplicate CIWO</option>
          <option value="In progress/Proposal approved">In progress/Proposal approved</option>
          <option value="In progress/Temporary fix">In progress/Temporary fix</option>
          <option value="In progress/Unsatisfactory">In progress/Unsatisfactory</option>
          <option value="In progress/Validation required">In progress/Validation required</option>
          <option value="In progress/Waiting for approval">In progress/Waiting for approval</option>
          <option value="In progress/Waiting for linked WO">In progress/Waiting for linked WO</option>
          <option value="In progress/Waiting for more information">In progress/Waiting for more information</option>
          <option value="In progress/Waiting for quote">In progress/Waiting for quote</option>
          <option value="Completed/Cancelled">Completed/Cancelled</option>
          <option value="Completed/Confirmed">Completed/Confirmed</option>
          <option value="Completed/Dispatch avoided">Completed/Dispatch avoided</option>
          <option value="Completed/No charge">Completed/No charge</option>
          <option value="Completed/NTE increase requested">Completed/NTE increase requested</option>
          <option value="Completed/Operational issue">Completed/Operational issue</option>
          <option value="Completed/Pending confirmation">Completed/Pending confirmation</option>
          <option value="Completed/Phone fix">Completed/Phone fix</option>
          <option value="Completed/Supply manager fulfillment">Completed/Supply manager fulfillment</option>
          <option value="Completed/Validation Required">Completed/Validation Required</option>
        </select>
        <label for="zoomArea">Area:</label>
        <select id="zoomArea">
          <option value="">--Select Area--</option>
          <option value="Back Office/IT">Back Office/IT</option>
          <option value="EG Stores">EG Stores</option>
        </select>
        <label for="zoomProblemType">Problem Type:</label>
        <select id="zoomProblemType">
          <option value="">--Select Problem Type--</option>
          <option value="IT Retail Automatic Helpdesk">IT Retail Automatic Helpdesk</option>
          <option value="Corporate">Corporate</option>
          <option value="HR Systems">HR Systems</option>
          <option value="Pricebook">Pricebook</option>
          <option value="Fueling System">Fueling System</option>
          <option value="General Maintenance">General Maintenance</option>
        </select>
        <label for="zoomEquipment">Equipment:</label>
        <select id="zoomEquipment">
        </select>
      </div>
      <div class="form-box">
        <h3>Details</h3>
        <label for="zoomName">Name:</label>
        <input type="text" id="zoomName" placeholder="Name of caller/contact" />
        <label for="zoomRole">Role:</label>
        <input type="text" id="zoomRole" placeholder="Manager/Cashier/Staff/etc." />
        <input type="text" placeholder="Store peak hours:" />
        <input type="text" placeholder="Available operating/working hours:" />
        <input type="text" placeholder="Any related/existing ticket:" />
        <input type="text" placeholder="What specific error occurred:" />
        <input type="text" placeholder="On which device:" />
        <input type="text" placeholder="Which system/equipment is affected:" />
        <input type="text" placeholder="How many device/s affected:" />
        <input type="text" placeholder="When did the Issue start:" />
        <label for="zoomTsSteps">What actions/troubleshooting steps have been taken:</label>
        <textarea id="zoomTsSteps" placeholder="Include phone discussion and full TS Steps" rows="5"></textarea>
        <input type="text" placeholder="KB Article/URL:" />
      </div>
      <button class="copy-btn" onclick="copyZoomForm()">Copy Form</button>
      <button class="clear-btn" onclick="clearZoomForm()">Clear Form</button>
    </div>

    <!-- Actions/Follow-Up Section (unchanged) -->
    <div id="actionsFollowUp" class="form-section">
      <div class="form-box">
        <h2>Actions/Follow-Up</h2>
        <label for="afuName">Name:</label>
        <input type="text" id="afuName" placeholder="Name:" />

        <label for="afuRole">Role:</label>
        <input type="text" id="afuRole" placeholder="Role:" />

        <label for="afuDate">Call Date & Time:</label>
        <div style="display:flex;align-items:center;gap:8px;">
          <span class="calendar-icon"></span>
          <input type="date" id="afuDate" style="width:140px;" onchange="showEstPopup()" oninput="showEstPopup()">
          <span id="afuEstTime" style="font-size:15px;color:#007BFF;margin-left:12px;"></span>
        </div>

        <label for="afuReach">Were you able to reach the store?</label>
        <select id="afuReach" onchange="afuReachChange()">
          <option value="">--Select--</option>
          <option value="Yes">Yes</option>
          <option value="No">No</option>
        </select>

        <div id="afuCallbackWrap" style="display:none;">
          <label for="afuCallbackAttempt">Callback Attempt:</label>
          <select id="afuCallbackAttempt" onchange="afuCallbackAttemptChange()">
            <option value="">--Select--</option>
            <option value="1st">1st</option>
            <option value="2nd">2nd</option>
            <option value="3rd">3rd</option>
          </select>
        </div>

        <div id="afuContactWrap" style="display:none;">
          <label for="afuContact">Contact Interaction:</label>
          <select id="afuContact" onchange="afuContactChange()">
            <option value="">--Select--</option>
            <option value="Phone">Phone</option>
            <option value="Email">Email</option>
            <option value="Kaseya">Kaseya</option>
            <option value="Others">Others</option>
          </select>
          <input type="text" id="afuOtherContact" placeholder="Please explain:" style="display:none;">
        </div>

        <label for="afuActionOwner">
          Action Owner:
        </label>
        <input type="text" id="afuActionOwner" placeholder="e.g., Helpdesk, Escalation, FTS, FSS etc." required />

        <label for="afuActionTaken">Action Taken:</label>
        <textarea id="afuActionTaken" rows="4" placeholder="Provide complete details"></textarea>

        <label for="afuNextAction">Next Action Required:</label>
        <textarea id="afuNextAction" rows="3" placeholder="Action needed"></textarea>

        <button type="button" class="copy-btn" onclick="afuCopyForm()">Copy Form</button>
        <button type="button" class="clear-btn" onclick="afuClearForm()">Clear Form</button>
        <div id="afuCopyMsg" style="display:none;margin-top:10px;color:#28a745;">Copied to clipboard!</div>
      </div>
    </div>
  </div>
  <div style="position: absolute; top: 20px; right: 20px; width: 600px; padding: 15px; background-color: #ffffffcc; border: 2px solid #ccc; border-radius: 10px; font-family: Arial, sans-serif; font-size: 14px;">
    <h3>ðŸ“ŒRemindersðŸ“Œ</h3>
    <span class="fade-link" onclick="fadeToggle('fssMsg')">FSS handles Pump &amp; Card Reader Hardware Issues</span>
    <div id="fssMsg" class="fade-message">
      CF IT Techs (FTS) do NOT handle any physical hardware issues with pumps or dispensers, including:<br>
      <ul>
        <li>Card readers not working</li>
        <li>Errors on card reader screens</li>
        <li>Pumps not dispensing fuel</li>
      </ul>
      These issues should be escalated directly to Gas Maintenance (FSS), provided KBs for EO1 error / Avalan have already been followed.
    </div>
    <span class="fade-link" onclick="fadeToggle('afterHoursMsg')">Weekend/After-Hours Support &amp; Escalations</span>
    <div id="afterHoursMsg" class="fade-message">
      <b>Down Store Incidents:</b><br>
      Store Escalations (After Hours)<br>
      Helpdesk L2s/Leads will post the issue in the (EGA) MS Teams Channel.<br>
      <ul>
        <li>If no response after 15 minutes, a follow-up message will be sent.</li>
        <li>If still no response after 15 more minutes, the Zoom Pod Store Escalations number will be called for urgent down store issues.</li>
      </ul>
      <b>FTS (After Hours)</b>
      <ul>
        <li>If confirmed down store and requires hardware replacement or on-site support, contact on-call FTS immediately.</li>
      </ul>
      <b>Hypercare Incidents:</b>
      <ul>
        <li>Store Escalations (After Hours)</li>
        <li>Helpdesk L2s/Leads will post the issue in the (EGA) MS Teams Channel and wait a response from the Store Escalations team after posting in the channel.</li>
      </ul>
      <b>FTS (After Hours):</b>
      <ul>
        <li>Contact the on-call team only during local business hours.</li>
        <li>If a ticket is submitted after hours on Friday, wait until Saturday morning (during local daytime hours) to reach out.</li>
      </ul>
      <b>MIM Incidents</b>
      <ul>
        <li>Identify and Confirm the Issue</li>
        <li>Engage MIMs Immediately (within 30mins)</li>
        <li>Initiate a call to the Major Incident Management (MIM) team.</li>
        <li>Major Incident - SWAT and Problem Process</li>
        <li>Enable Pre-Queue for Support Channels</li>
        <li>Activate pre-queue for Five9/Kaseya to manage call volumes.</li>
        <li>Five9 Pre-queue Creation process</li>
        <li>Send Kaseya Notification</li>
        <li>Issue mass communication via Kaseya to notify affected users.</li>
        <li>Sending Kaseya Message</li>
        <li>Inform Outage GC Channel in (ACN) MS Teams</li>
        <li>
          Post outage update with:
          <ul>
            <li>Affected system</li>
            <li>Impact summary</li>
            <li>Actions taken so far</li>
            <li>ETA if known</li>
          </ul>
        </li>
        <li>Notify Store Escalation Teams/Zoom Helpdesk channel</li>
        <li>Share update in Teams Store Escalation Channel for awareness.</li>
        <li>Ongoing Monitoring & Documentation</li>
        <li>Monitor system status and user impact continuously.</li>
        <li>
          Document:
          <ul>
            <li>Timeline of events</li>
            <li>Actions taken</li>
            <li>All communications and updates</li>
          </ul>
        </li>
        <li>Maintain a running log until resolution is confirmed.</li>
      </ul>
    </div>
  </div>
  <div id="copyMessage">Copied to clipboard!</div>
</body>
</html>